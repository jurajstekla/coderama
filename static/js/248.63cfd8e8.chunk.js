"use strict";(self.webpackChunkcoderama=self.webpackChunkcoderama||[]).push([[248],{2317:function(e,t,n){n.d(t,{NP:function(){return d},tu:function(){return h},Bm:function(){return f}});var r=n(9439),i=n(3433),a=n(2791),o=n(1933),s=n(4165),u=n(5861),c=n(6713),l=function(){var e=(0,u.Z)((0,s.Z)().mark((function e(t){var n,r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.h.get("",{params:{i:t}});case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=localStorage.getItem("favoriteMovies");return JSON.parse(e)||[]},h=function(e){var t=d();t=t.includes(e)?t.filter((function(t){return t!==e})):[].concat((0,i.Z)(t),[e]),localStorage.setItem("favoriteMovies",JSON.stringify((0,i.Z)(new Set(t))))},f=function(e){var t=(0,o.useQueryClient)(),n=(0,a.useState)(function(e){var t=localStorage.getItem("favoriteMovies");return(JSON.parse(t)||[]).includes(e)}(e)),i=(0,r.Z)(n,2),s=i[0],u=i[1],c=(0,o.useQuery)(["movie",{movieId:e}],(function(){return l(e)}),{enabled:""!==e,refetchOnMount:!1});return{data:c.data,isLoading:c.isLoading,isFavorite:s,handleIsFavorite:function(){h(e),u((function(e){return!e})),t.invalidateQueries("favorites")}}}},2248:function(e,t,n){n.r(t),n.d(t,{default:function(){return y}});var r=n(2791),i=n(4554),a=n(890),o=n(6314),s=n(9201),u=n(184),c=(0,s.Z)((0,u.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete"),l=n(4515),d=n(4680),h=n(9759),f=n(5129),v=n(1933),x=n(7689),m=n(2317),p=n(4165),g=n(1413),Z=n(5861),w=n(6713),j=function(){var e=(0,Z.Z)((0,p.Z)().mark((function e(){var t,n,r;return(0,p.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,m.NP)(),n=t.map((function(e){return w.h.get("",{params:{i:e}})})),e.next=4,Promise.all(n);case 4:return r=(r=(r=e.sent).map((function(e){return e.data}))).map((function(e){return(0,g.Z)((0,g.Z)({},e),{},{id:e.imdbID})})),e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=function(){var e=(0,x.s0)(),t=(0,v.useQuery)("favorites",j),n=t.data,r=t.isLoading,i=(0,v.useQueryClient)();return{data:n,isLoading:r,handleRowClick:function(t){var n=t.row;e("/details/".concat(n.id))},handleDeleteFromFavorites:function(e){var t=e.row;(0,m.tu)(t.id),i.setQueryData("favorites",(function(e){return e.filter((function(e){return e.id!==t.id}))}))}}}(),t=e.data,n=e.isLoading,s=e.handleRowClick,p=e.handleDeleteFromFavorites,g=(0,r.useMemo)((function(){return[{field:"Title",headerName:"Title",flex:1},{field:"Type",headerName:"Type",flex:1},{field:"Year",headerName:"Year",flex:1},{field:"actions",type:"actions",headerName:"Details",width:100,flex:1,sortable:!1,getActions:function(e){return[(0,u.jsx)(l.u,{onClick:function(){return p(e)},icon:(0,u.jsx)(c,{}),label:"See details..."})]}}]}),[]);return(0,u.jsxs)(i.Z,{width:1,height:1,sx:{p:1},children:[(0,u.jsx)(i.Z,{sx:{height:f.J9/2,mb:2},children:(0,u.jsx)(a.Z,{variant:"h4",children:"Favorite movies"})}),(0,u.jsx)(i.Z,{width:1,sx:{height:"calc(100% - ".concat(f.J9/2+14,"px)")},children:(0,u.jsx)(h.Z,{loading:n,children:(0,u.jsx)(d._$,{rows:t||[],columns:g,onRowClick:s,disableColumnFilter:!0,pageSize:50,headerHeight:45,rowHeight:35,rowsPerPageOptions:[50],stickyHeader:!0,slots:{noRowsOverlay:function(){return(0,u.jsx)(o.Z,{height:"100%",alignItems:"center",justifyContent:"center",children:(0,u.jsx)(a.Z,{variant:"subtitle1",children:"No favorite movies ..."})})}}})})})]})}},9759:function(e,t,n){var r=n(2791),i=n(4554),a=n(7482),o=n(3239),s=n(2604),u=n(5129),c=n(184),l=function(e){var t=e.children,n=e.loading,r=e.sx,l=e.loaderSize,d=e.linear,h=e.withoutBlur;return(0,c.jsxs)(i.Z,{sx:r,style:{pointerEvents:n&&"none",position:"relative"},width:1,height:1,children:[(0,c.jsx)(i.Z,{width:1,height:1,sx:{position:"absolute"},children:t}),(0,c.jsx)(s.Z,{condition:n,children:(0,c.jsx)(i.Z,{width:1,height:1,sx:{zIndex:"10",borderRadius:2,background:!h&&"rgb(0 0 0 / 10%)"},children:(0,c.jsxs)(s.Z,{condition:d,children:[(0,c.jsx)(i.Z,{width:1,height:1,sx:{display:"flex",alignItems:"end"},children:(0,c.jsx)(a.Z,{sx:{width:"100%"},color:"buttons"})}),(0,c.jsx)(i.Z,{width:1,height:1,sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:(0,c.jsx)(o.Z,{color:"buttons",size:u.B9[l]})})]})})})]})};l.defaultProps={loaderSize:"medium",linear:!1,withoutBlur:!1},t.Z=r.memo(l)}}]);
//# sourceMappingURL=248.63cfd8e8.chunk.js.map